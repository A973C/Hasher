/*!
 * Hasher <http://github.com/millermedeiros/hasher>
 * @author Miller Medeiros
 * @version 0.9.93+ (2011/08/03 07:26 PM)
 * Released under the MIT License
 */
var hasher=(function(h){var l=25,m=h.document,a=h.location,k=h.history,q=signals.Signal,d,p,j,y,b,w,e=/#(.*)$/,g=(!+"\v1"),u=("onhashchange" in h),c=g&&!u,n=(a.protocol==="file:");function o(A){A=A||"";var z=new RegExp("^\\"+d.prependHash+"|\\"+d.appendHash+"$","g");return A.replace(z,"")}function x(){var z=e.exec(d.getURL());return(z&&z[1])?decodeURIComponent(z[1]):""}function t(){return(b)?b.contentWindow.frameHash:null}function s(){b=m.createElement("iframe");b.src="about:blank";b.style.display="none";m.body.appendChild(b)}function f(){if(b&&p!==t()){var z=b.contentWindow.document;z.open();z.write("<html><head><title>"+m.title+'</title><script type="text/javascript">var frameHash="'+p+'";<\/script></head><body>&nbsp;</body></html>');z.close()}}function i(z){z=decodeURIComponent(z);if(p!==z){var A=p;p=z;if(c){f()}d.changed.dispatch(o(z),o(A))}}w=(c)?function(){var A=x(),z=t();if(z!==p&&z!==A){d.setHash(o(z))}else{if(A!==p){i(A)}}}:function(){var z=x();if(z!==p){i(z)}};function v(B,z,A){if(B.addEventListener){B.addEventListener(z,A,false)}else{if(B.attachEvent){B.attachEvent("on"+z,A)}}}function r(B,z,A){if(B.removeEventListener){B.removeEventListener(z,A,false)}else{if(B.detachEvent){B.detachEvent("on"+z,A)}}}d={VERSION:"0.9.93+",appendHash:"",prependHash:"/",separator:"/",changed:new q(),stopped:new q(),initialized:new q(),init:function(){if(y){return}p=x();if(u){v(h,"hashchange",w)}else{if(c){if(!b){s()}f()}j=setInterval(w,l)}y=true;d.initialized.dispatch(o(p))},stop:function(){if(!y){return}if(u){r(h,"hashchange",w)}else{clearInterval(j);j=null}y=false;d.stopped.dispatch(o(p))},isActive:function(){return y},getURL:function(){return a.href},getBaseURL:function(){return d.getURL().replace(/(\?.*)|(\#.*)/,"")},setHash:function(z){z=(z)?d.prependHash+z.replace(/^\#/,"")+d.appendHash:z;if(z!==p){i(z);if(g&&n){z=z.replace(/\?/,"%3F")}a.hash="#"+encodeURI(z)}},getHash:function(){return o(p)},getHashAsArray:function(){return d.getHash().split(d.separator)},dispose:function(){d.stop();d.initialized.dispose();d.stopped.dispose();d.changed.dispose();b=d=h.hasher=null},toString:function(){return'[hasher version="'+d.VERSION+'" hash="'+d.getHash()+'"]'}};return d}(window));