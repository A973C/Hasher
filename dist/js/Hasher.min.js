/*
 * Hasher <http://github.com/millermedeiros/Hasher>
 * Includes: js-signals (::js-signals_version::), millermedeiros.queryUtils (0.8.2), millermedeiros.event-listenerFacade (0.3)
 * @author Miller Medeiros <http://www.millermedeiros.com/>
 * @version 0.9.9 ::BUILD_DATE::
 * Released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
(function(c,b){var a=c.millermedeiros={};(function(f,d){var e=f.location;d.queryUtils={getQueryString:function(g){g=g||e.href;g=g.replace(/#[\w\W]*/,"");var h=/\?[a-zA-Z0-9\=\&\%\$\-\_\.\+\!\*\'\(\)\,]+/.exec(g);return(h)?decodeURIComponent(h[0]):""},getQueryObject:function(g){return this.toQueryObject(this.getQueryString(g))},toQueryObject:function(k){var g=k.replace("?","").split("&"),j=g.length,i={},h;while(j--){g[j]=g[j].split("=");h=g[j][1];i[g[j][0]]=isNaN(h)?h:parseFloat(h)}return i},getParamValue:function(k,h){h=h||e.href;var j=new RegExp("(\\?|&)"+k+"=([^&]*)"),g=j.exec(h),i=(g&&g[2])?g[2]:null;return isNaN(i)?i:parseFloat(i)},hasParam:function(i,g){var h=new RegExp("(\\?|&)"+i+"=","g");return h.test(this.getQueryString(g))},toQueryString:function(h){var g=[],i;for(i in h){if(h.hasOwnProperty(i)){g.push(i+"="+h[i])}}return(g.length)?"?"+g.join("&"):""}}}(c,a));a.event=a.event||{};a.event.addListener=function(f,d,e){if(f.addEventListener){f.addEventListener(d,e,false)}else{if(f.attachEvent){f.attachEvent("on"+d,e)}else{f["on"+d]=e}}};a.event.removeListener=function(f,d,e){if(f.removeEventListener){f.removeEventListener(d,e,false)}else{if(f.detachEvent){f.detachEvent("on"+d,e)}else{f["on"+d]=null}}}}(window,window.document));
/*!
 * JS Signals <https://github.com/millermedeiros/js-signals>
 * Released under the MIT license (http://www.opensource.org/licenses/mit-license.php)
 * @author Miller Medeiros <http://millermedeiros.com>
 * @version 0.5
 * @build 100 12/03/2010 05:27 PM
 */
(function(){var a=window.signals={};a.VERSION="0.5";a.isDef=function(b){return typeof b!=="undefined"};a.Signal=function(){this._bindings=[]};a.Signal.prototype={_shouldPropagate:true,_isEnabled:true,_registerListener:function(e,d,c){if(!a.isDef(e)){throw new Error("listener is a required param of add() and addOnce().")}var b=this._indexOfListener(e),f;if(b!==-1){f=this._bindings[b];if(f.isOnce()!==d){throw new Error("You cannot add"+(d?"":"Once")+"() then add"+(!d?"":"Once")+"() the same listener without removing the relationship first.")}}else{f=new a.SignalBinding(e,d,c,this);this._addBinding(f)}return f},_addBinding:function(b){this._bindings.push(b)},_indexOfListener:function(b){var c=this._bindings.length;while(c--){if(this._bindings[c]._listener===b){return c}}return -1},add:function(c,b){return this._registerListener(c,false,b)},addOnce:function(c,b){return this._registerListener(c,true,b)},_removeByIndex:function(b){this._bindings[b]._destroy();this._bindings.splice(b,1)},remove:function(c){if(!a.isDef(c)){throw new Error("listener is a required param of remove().")}var b=this._indexOfListener(c);if(b!==-1){this._removeByIndex(b)}return c},removeAll:function(){var b=this._bindings.length;while(b--){this._removeByIndex(b)}},getNumListeners:function(){return this._bindings.length},disable:function(){this._isEnabled=false},enable:function(){this._isEnabled=true},isEnabled:function(){return this._isEnabled},halt:function(){this._shouldPropagate=false},dispatch:function(e){if(!this._isEnabled){return}var b=Array.prototype.slice.call(arguments),f=this._bindings.slice(),c=0,d;this._shouldPropagate=true;while(d=f[c++]){if(d.execute(b)===false||!this._shouldPropagate){break}}},dispose:function(){this.removeAll();delete this._bindings},toString:function(){return"[Signal isEnabled: "+this._isEnabled+" numListeners: "+this.getNumListeners()+"]"}};a.SignalBinding=function(e,b,d,c){this._listener=e;this._isOnce=b;this.context=d;this._signal=c};a.SignalBinding.prototype={_isEnabled:true,execute:function(b){var c;if(this._isEnabled){c=this._listener.apply(this.context,b);if(this._isOnce){this.detach()}}return c},detach:function(){return this._signal.remove(this._listener)},getListener:function(){return this._listener},dispose:function(){this.detach();this._destroy()},_destroy:function(){delete this._signal;delete this._isOnce;delete this._listener;delete this.context},disable:function(){this._isEnabled=false},enable:function(){this._isEnabled=true},isEnabled:function(){return this._isEnabled},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce: "+this._isOnce+", isEnabled: "+this._isEnabled+"]"}}}());(function(k,o){var a=k.location,n=k.history,b=k.HasherEvent,u=k.millermedeiros,e={},A=u.queryUtils,g=u.event,s=signals.Signal,r,m,z,d,f=navigator.userAgent,i=/MSIE/.test(f)&&(!k.opera),w=("onhashchange" in k),c=i&&!w,p=(a.protocol==="file:");function q(C){C=C||"";var B=new RegExp("^\\"+e.prependHash+"|\\"+e.appendHash+"$","g");return C.replace(B,"")}function v(){return(d)?d.contentWindow.frameHash:null}function h(C){if(d&&C!=v()){var B=d.contentWindow.document;B.open();B.write("<html><head><title>"+e.getTitle()+'</title><script type="text/javascript">var frameHash="'+C+'";<\/script></head><body>&nbsp;</body></html>');B.close()}}function l(B){B=decodeURIComponent(B);if(r!=B){var C=r;r=B;if(c){h(B)}e.changed.dispatch(q(B),q(C))}}function t(){d=o.createElement("iframe");d.src="about:blank";d.style.display="none";o.body.appendChild(d)}function y(){var B=/#(.*)$/.exec(e.getURL());return(B&&B[1])?decodeURIComponent(B[1]):""}function x(){var B=y();if(B!=r){l(B)}}function j(){var C=y(),B=q(v());if(B!=r&&B!=C){e.setHash(B)}else{if(C!=r){l(C)}}}k.Hasher=e;e.VERSION="0.9.9";e.appendHash="/";e.prependHash="/";e.separator="/";e.changed=new s();e.stopped=new s();e.initialized=new s();e.init=function(){if(z){return}var B=r;r=y();if(w){g.addListener(k,"hashchange",x)}else{if(c){if(!d){t();h(r)}m=setInterval(j,25)}else{m=setInterval(x,25)}}z=true;this.initialized.dispatch(q(r),q(B))};e.stop=function(){if(!z){return}if(w){g.removeListener(k,"hashchange",x)}else{clearInterval(m);m=null}z=false;this.stopped.dispatch(q(r),q(r))};e.isActive=function(){return z};e.getURL=function(){return a.href};e.getBaseURL=function(){return this.getURL().replace(/(\?.*)|(\#.*)/,"")};e.setHash=function(B){B=(B)?this.prependHash+B.replace(/^\#/,"")+this.appendHash:B;if(B!=r){l(B);if(i&&p){B=B.replace(/\?/,"%3F")}a.hash="#"+encodeURI(B)}};e.getHash=function(){return q(r)};e.getHashAsArray=function(){return this.getHash().split(this.separator)};e.getHashQuery=function(){return A.getQueryString(this.getHash()).substr(1)};e.getHashQueryAsObject=function(){return A.toQueryObject(this.getHashQuery())};e.getHashQueryParam=function(B){return A.getParamValue(B,this.getHash())};e.setTitle=function(B){o.title=B};e.getTitle=function(){return o.title};e.back=function(){n.back()};e.forward=function(){n.forward()};e.go=function(B){n.go(B)};e.hyphenate=function(B){B=B||"";B=B.replace(/[^0-9a-zA-Z\xC0-\xFF \-]/g,"").replace(/([a-z\xE0-\xFF])([A-Z\xC0\xDF])/g,"$1 $2").replace(/ +/g,"-");return this.removeAccents(B)};e.removeAccents=function(B){B=B||"";if(B.search(/[\xC0-\xFF]/g)>-1){B=B.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xDF]/g,"B").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF0]/g,"D").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")}return B};e.dispose=function(){e.initialized.removeAll();e.stopped.removeAll();e.changed.removeAll();e.stop();r=m=z=d=f=i=c=w=p=A=g=e=k.Hasher=null};e.toString=function(){return'[Hasher version="'+this.VERSION+'" hash="'+this.getHash()+'"]'}}(window,window.document));