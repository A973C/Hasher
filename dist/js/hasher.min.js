/*!
 * Hasher <http://github.com/millermedeiros/hasher>
 * @author Miller Medeiros <http://millermedeiros.com>
 * @version 0.9.91 (2011/02/22 12:31 PM)
 * Released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
var hasher=(function(i,m){var e,a=i.location,l=i.history,q=signals.Signal,p,k,y,b,d=navigator.userAgent,g=/MSIE/.test(d)&&(!i.opera),u=("onhashchange" in i),c=g&&!u,n=(a.protocol==="file:");function o(A){A=A||"";var z=new RegExp("^\\"+e.prependHash+"|\\"+e.appendHash+"$","g");return A.replace(z,"")}function t(){return(b)?b.contentWindow.frameHash:null}function f(A){if(b&&A!=t()){var z=b.contentWindow.document;z.open();z.write("<html><head><title>"+e.getTitle()+'</title><script type="text/javascript">var frameHash="'+A+'";<\/script></head><body>&nbsp;</body></html>');z.close()}}function j(z){z=decodeURIComponent(z);if(p!=z){var A=p;p=z;if(c){f(z)}e.changed.dispatch(o(z),o(A))}}function s(){b=m.createElement("iframe");b.src="about:blank";b.style.display="none";m.body.appendChild(b)}function x(){var z=/#(.*)$/.exec(e.getURL());return(z&&z[1])?decodeURIComponent(z[1]):""}function w(){var z=x();if(z!=p){j(z)}}function h(){var A=x(),z=o(t());if(z!=p&&z!=A){e.setHash(z)}else{if(A!=p){j(A)}}}function v(B,z,A){if(B.addEventListener){B.addEventListener(z,A,false)}else{if(B.attachEvent){B.attachEvent("on"+z,A)}}}function r(B,z,A){if(B.removeEventListener){B.removeEventListener(z,A,false)}else{if(B.detachEvent){B.detachEvent("on"+z,A)}}}e={VERSION:"0.9.91",appendHash:"/",prependHash:"/",separator:"/",changed:new q(),stopped:new q(),initialized:new q(),init:function(){if(y){return}var z=p;p=x();if(u){v(i,"hashchange",w)}else{if(c){if(!b){s();f(p)}k=setInterval(h,25)}else{k=setInterval(w,25)}}y=true;this.initialized.dispatch(o(p),o(z))},stop:function(){if(!y){return}if(u){r(i,"hashchange",w)}else{clearInterval(k);k=null}y=false;this.stopped.dispatch(o(p),o(p))},isActive:function(){return y},getURL:function(){return a.href},getBaseURL:function(){return this.getURL().replace(/(\?.*)|(\#.*)/,"")},setHash:function(z){z=(z)?this.prependHash+z.replace(/^\#/,"")+this.appendHash:z;if(z!=p){j(z);if(g&&n){z=z.replace(/\?/,"%3F")}a.hash="#"+encodeURI(z)}},getHash:function(){return o(p)},getHashAsArray:function(){return this.getHash().split(this.separator)},setTitle:function(z){m.title=z},getTitle:function(){return m.title},back:function(){l.back()},forward:function(){l.forward()},go:function(z){l.go(z)},dispose:function(){e.initialized.removeAll();e.stopped.removeAll();e.changed.removeAll();e.stop();b=e=i.hasher=null},toString:function(){return'[hasher version="'+this.VERSION+'" hash="'+this.getHash()+'"]'}};return e}(window,window.document));